{"ast":null,"code":"var _jsxFileName = \"/Users/sebastiane/pic-gallery/picture-gallery/src/searchPhotos.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Unsplash, { toJson } from \"unsplash-js\";\nimport Loading from \"./components/Loading/\";\nconst unsplash = new Unsplash({\n  accessKey: \"8f9fbd10d8bb0a7e69dd531aea77d5a0b84152b806286ed7f83f896c1987413b\"\n});\nexport default function SearchPhotos() {\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\n  const [query, setQuery] = useState(\"\");\n  const [pics, setPics] = useState([]);\n  const [tags, setTags] = useState([]);\n  const [filters, setFilters] = useState([]);\n  useEffect(() => {\n    if (pics) {\n      setTags([]);\n      const tags = pics.map(pic => {\n        return pic.tags;\n      });\n\n      if (tags) {\n        const titles = tags.map(tag => {\n          return tag.map(tg => {\n            return tg.title;\n          });\n        });\n\n        if (titles) {\n          titles.forEach(title => {\n            title.forEach(tt => {\n              setTags(tags => [...tags, tt]);\n            });\n          });\n        }\n      }\n    }\n  }, [pics]);\n  useEffect(() => {\n    const uniqueTags = tags.filter(function (elem, pos) {\n      return tags.indexOf(elem) === pos;\n    });\n    setFilters(uniqueTags);\n  }, [tags]);\n\n  const searchPhotos = async e => {\n    e.preventDefault();\n    unsplash.search.photos(query).then(toJson).then(json => {\n      setPics(json.results);\n    });\n  };\n\n  const handleChangeFilter = e => {\n    const tag = e.target.value;\n    const newPics = pics.filter(pic => {\n      return pic.tags.find(el => el.title === tag);\n    });\n    setPics(newPics);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form\",\n    onSubmit: searchPhotos,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }, \" \", /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label\",\n    htmlFor: \"query\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, \" \", \"\\uD83D\\uDCF7\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"query\",\n    className: \"input\",\n    placeholder: `Try \"dog\" or \"apple\"`,\n    value: query,\n    onChange: e => setQuery(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, \"Search\"), filters.length && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, \"Filter by Tags\"), /*#__PURE__*/React.createElement(\"select\", {\n    onChange: handleChangeFilter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, filters.map(option => /*#__PURE__*/React.createElement(\"option\", {\n    value: option,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, option))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, pics.map(pic => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    key: pic.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"card--image\",\n    alt: pic.alt_description,\n    src: pic.urls.full,\n    width: \"50%\",\n    height: \"50%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }))), \" \"));\n}","map":{"version":3,"sources":["/Users/sebastiane/pic-gallery/picture-gallery/src/searchPhotos.js"],"names":["React","useState","useEffect","Unsplash","toJson","Loading","unsplash","accessKey","SearchPhotos","isFirstLoad","setIsFirstLoad","query","setQuery","pics","setPics","tags","setTags","filters","setFilters","map","pic","titles","tag","tg","title","forEach","tt","uniqueTags","filter","elem","pos","indexOf","searchPhotos","e","preventDefault","search","photos","then","json","results","handleChangeFilter","target","value","newPics","find","el","length","option","id","alt_description","urls","full"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Unsplash, { toJson } from \"unsplash-js\";\nimport Loading from \"./components/Loading/\";\n\nconst unsplash = new Unsplash({\n  accessKey: \"8f9fbd10d8bb0a7e69dd531aea77d5a0b84152b806286ed7f83f896c1987413b\",\n});\nexport default function SearchPhotos() {\n\n  const [isFirstLoad, setIsFirstLoad] = useState(true);\n  const [query, setQuery] = useState(\"\");\n  const [pics, setPics] = useState([]);\n  const [tags, setTags] = useState([]);\n  const [filters, setFilters] = useState([]);\n\n  useEffect(() => {\n    if (pics) {\n      setTags([]);\n      const tags = pics.map((pic) => {\n        return pic.tags;\n      });\n      \n      \n      if (tags) {\n        const titles = tags.map((tag) => {\n          return tag.map((tg) => {\n            return tg.title;\n          });\n          \n        });\n        \n        if (titles) {\n          titles.forEach((title) => {\n            title.forEach((tt) => {\n                setTags(tags => [...tags, tt]);\n            });\n          });\n          \n        }\n\n      }\n    }\n  }, [pics]);\n\n  useEffect(() => {\n    const uniqueTags = tags.filter(function(elem, pos) {\n        return tags.indexOf(elem) === pos;\n    });\n\n    setFilters(uniqueTags);\n  }, [tags]);\n  \n  const searchPhotos = async (e) => {\n    e.preventDefault();\n\n    unsplash.search\n      .photos(query)\n      .then(toJson)\n      .then((json) => {\n        setPics(json.results);\n      });\n\n  };\n\n  const handleChangeFilter = (e) => {\n    const tag = e.target.value;\n    const newPics = pics.filter((pic) => { return pic.tags.find((el) => el.title === tag) });\n    setPics(newPics);\n  }\n  \n  return (\n    <>\n      <form className=\"form\" onSubmit={searchPhotos}>\n        {\" \"}\n        <label className=\"label\" htmlFor=\"query\">\n          {\" \"}\n          📷\n        </label>\n        <input\n          type=\"text\"\n          name=\"query\"\n          className=\"input\"\n          placeholder={`Try \"dog\" or \"apple\"`}\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n        />\n        <button type=\"submit\" className=\"button\">\n          Search\n        </button>\n        {filters.length &&\n          <>\n            <span>Filter by Tags</span>\n            <select onChange={handleChangeFilter}>\n              {filters.map((option) => (\n                <option value={option}>{option}</option>\n              ))}\n            </select>\n          </>\n        }\n        \n      </form>\n\n      <div className=\"card-list\">\n        {pics.map((pic) => (\n          <div className=\"card\" key={pic.id}>\n            <img\n              className=\"card--image\"\n              alt={pic.alt_description}\n              src={pic.urls.full}\n              width=\"50%\"\n              height=\"50%\"\n            ></img>\n          </div>\n        ))}{\" \"}\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}